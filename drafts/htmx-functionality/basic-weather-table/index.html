
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flight Table</title>

    <!-- Link to the CSS files located in the 'css' folder -->
    <link rel="stylesheet" href="/css/htmxFilter.css">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/tableStyles.css">

    <script src="https://unpkg.com/htmx.org"></script>


</head>

<body>

    <!-- Background image div -->
    <div id="bg-image-dreams"></div>

    <!-- Initial website name that will fade in and out -->
    <div id="website-name" class="fade-in">
        Fair Fare Finder
    </div>

    <!-- Table content container that will appear after the text fades out -->
    <div id="table-container">
        <form id="flight-form" hx-get="/filter" hx-target="#flight-table" hx-trigger="change, input delay:50ms">
            <label for="city1">Origin City:</label>
            <select id="city1" name="city1">
                <option value="Berlin" selected>Berlin</option>
                <option value="Glasgow" >Glasgow</option> <!-- Default selection is Glasgow -->
                <option value="Edinburgh">Edinburgh</option>
            </select>

            <label for="sort">Sort By:</label>
            <select id="sort" name="sort">
                <option value="best_weather" selected>Sunniest and Warmest</option>
                <option value="worst_weather">Coldest and Wettest</option>
                <option value="low_price">Most Affordable</option>
                <option value="high_price">Most Expensive</option>
           </select>

            <label for="combinedPrice-slider">Budget</label>
            <input type="range" id="combinedPrice-slider" name="maxPriceLinear" min="0" max="100" step="1" value="50" 
                   hx-get="/update-slider-price" 
                   hx-target="#priceOutput" 
                   hx-trigger="input">
            <output id="priceOutput">â‚¬300.00</output>
            
        </form>

        <div id="flight-table">
         <div class="scroll-container">
            <!-- The table will be dynamically updated here -->
         </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // After the fade-out animation ends, hide the website-name and show the table
            setTimeout(function() {
                document.getElementById('website-name').style.display = 'none';

                // Show the table content with the fade-in animation and move it up
                const tableContainer = document.getElementById('table-container');
                tableContainer.classList.add('show');

                // Wait for the 'moveUp' animation to finish (animationend event)
                tableContainer.addEventListener('animationend', function(event) {
                    if (event.animationName === 'moveUp') {
                        // Manually trigger the form submission after the animation is complete
                        htmx.trigger('#flight-form', 'change');  // Simulate a form change event
                    }
                });

                // Show the background image with a fade-in effect
                document.getElementById('bg-image-dreams').style.opacity = '1';
            }, 2000); // Adjust timing for fade-in and fade-out
        });
    </script>

</body>
</html>

